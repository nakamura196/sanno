(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],h=0,d=[];h<o.length;h++)r=o[h],n[r]&&d.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={app:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),n=s("bb71");s("da64");i["a"].use(n["a"],{iconfont:"md"});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-toolbar",[s("v-toolbar-title",{staticClass:"headline"},[e._v("\n            Un Outil de connexion des ID VIAF aux données ENCRE\n        ")])],1),s("v-content",[s("router-view")],1),s("v-footer",{attrs:{dark:"",height:"auto"}},[s("v-card",{staticClass:"flex",attrs:{flat:"",tile:""}},[s("v-card-actions",{staticClass:"grey darken-3 justify-center my-5 text-xs-center"},[e._v("\n                Tokyo Digital History. / Société d’étude sur l’Encyclopédie et les Lumières.\n            ")])],1)],1)],1)},r=[],o=s("2877"),l=s("6544"),c=s.n(l),u=s("7496"),h=s("b0af"),d=s("99d9"),p=s("549c"),v=s("553a"),f=s("71d9"),b=s("2a7f"),m={},g=Object(o["a"])(m,a,r,!1,null,null,null),y=g.exports;c()(g,{VApp:u["a"],VCard:h["a"],VCardActions:d["a"],VContent:p["a"],VFooter:v["a"],VToolbar:f["a"],VToolbarTitle:b["a"]});var _=s("8c4f"),w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[s("v-container",[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.$isAuthenticated(),expression:"!$isAuthenticated()"}],staticClass:"mb-4",attrs:{color:"primary"},on:{click:e.login}},[e._v("Login")]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$isAuthenticated()&&e.items.length>0,expression:"$isAuthenticated() && items.length > 0"}],staticClass:"mb-4",attrs:{color:"warning"},on:{click:e.logout}},[e._v("Logout")]),s("v-btn",{staticClass:"mb-4",on:{click:e.reload}},[s("v-icon",[e._v("refresh")])],1),s("v-list",{directives:[{name:"show",rawName:"v-show",value:e.items.length>0,expression:"items.length > 0"}],staticClass:"elevation-1 mb-5",attrs:{"two-line":""}},[e._l(e.items,function(t){return[s("v-list-tile",{key:t.title,attrs:{avatar:""},on:{click:function(s){return e.move(t.title)}}},[s("v-list-tile-avatar",[s("v-icon",[e._v("person")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1),t.selected?s("v-list-tile-action",[s("v-btn",{attrs:{icon:"",ripple:""}},[s("v-icon",[e._v("check")])],1)],1):e._e()],1)]})],2)],1)],1)],1)},k=[],C=s("bc3a"),V=s.n(C),x=s("1685"),I=s.n(x);let j="12LdWL7-4WVfSGoPuM7Ji-yyJaXcjI3WywXzM7F48PYY",$="contributeurs_viaf";var O={data:function(){return{items:[],selected:[],apiKey:"",clientId:""}},created:function(){let e=Object.assign({},this.$route.query);this.apiKey=e["apiKey"],this.clientId=e["clientId"];const t={apiKey:this.apiKey,clientId:this.clientId,discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],scope:"https://www.googleapis.com/auth/spreadsheets"};i["a"].use(I.a,t),this.init()},computed:{isSignedIn(){return this.$isSignedIn()}},methods:{init(){1==this.$isAuthenticated()&&this.getSelected()},login(){this.$login()},logout(){this.$logout()},getSelected(){let e=[];this.selected=e,this.$getGapiClient().then(t=>{t.client.sheets.spreadsheets.values.get({spreadsheetId:j,range:$+"!A2:B"}).then(t=>{let s=t.result.values;for(let i=0;i<s.length;i++){let t=s[i];t.length>=2&&t[1].length>0&&e.push(t[0])}this.list()})})},move(e){this.$router.push({path:"check",query:{q:e,apiKey:this.apiKey,clientId:this.clientId}})},reload(){location.reload()},list(){V.a.get("https://nakamura196.github.io/sanno/contributeurs_viaf.json").then(e=>{let t=this.items,s=e.data;const i={};Object.keys(s).sort().forEach(function(e){i[e]=s[e]});for(let n in i){let e=-1!=this.selected.indexOf(n),s={title:n,selected:e};t.push(s)}}).catch(e=>{console.log(e)})}}},S=O,T=s("8336"),A=s("a523"),E=s("132d"),L=s("8860"),K=s("ba95"),P=s("40fe"),M=s("c954"),N=s("5d23"),q=Object(o["a"])(S,w,k,!1,null,null,null),J=q.exports;c()(q,{VApp:u["a"],VBtn:T["a"],VContainer:A["a"],VContent:p["a"],VIcon:E["a"],VList:L["a"],VListTile:K["a"],VListTileAction:P["a"],VListTileAvatar:M["a"],VListTileContent:N["a"],VListTileTitle:N["b"]});var W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[s("v-container",[s("h1",{staticClass:"mb-4"},[e._v(e._s(e.person))]),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":"","hide-headers":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("th",[e._v(e._s(t.item.key))]),s("td",{staticClass:"py-2"},[e._v(e._s(t.item.value))])]}}])}),s("h2",{staticClass:"mt-5 mb-4"},[e._v("Sélectionnez les noms appropriés (réponses multiples autorisées)")]),e._l(e.list,function(t,i){return[s("v-card",{key:i,staticClass:"px-4 mb-4"},[s("v-card-actions",[s("v-checkbox",{key:t.title,attrs:{label:t.title+" ["+t.viafId+"]",value:t.viafId},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),t.references.length>0?[s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(e){t.show=!t.show}}},[s("v-icon",[e._v(e._s(t.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)]:e._e()],2),s("v-slide-y-transition",[s("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],staticClass:"pb-5"},e._l(t.references,function(t,i){return s("div",{key:i},[s("span",[e._v("["+e._s(i+1)+"] "),s("a",{attrs:{target:"_blank",href:t}},[e._v(e._s(t))])]),s("br")])}),0)],1)],1)]}),s("v-btn",{staticClass:"mb-5",attrs:{color:"primary"},on:{click:e.save}},[s("v-icon",[e._v("save")])],1),s("v-btn",{staticClass:"mb-5",on:{click:e.back}},[s("v-icon",[e._v("home")])],1)],2)],1)],1)},D=[];let G="|",Y="12LdWL7-4WVfSGoPuM7Ji-yyJaXcjI3WywXzM7F48PYY",F="contributeurs_viaf",R="https://nakamura196.github.io/sanno/contributeurs_viaf.json";var X={data:function(){return{items:[],headers:[],list:[],person:"",result:{},selected:[],index:-1,apiKey:"",clientId:""}},created:function(){let e=Object.assign({},this.$route.query);this.apiKey=e["apiKey"],this.clientId=e["clientId"],this.person=e.q,this.getSelected()},methods:{back(){this.$router.push({path:"/",query:{apiKey:this.apiKey,clientId:this.clientId}})},save(){let e=this.selected,t=2+this.index;this.$getGapiClient().then(s=>{s.client.sheets.spreadsheets.values.update({spreadsheetId:Y,range:F+"!A"+t+":C"+t,valueInputOption:"USER_ENTERED",resource:{values:[[this.person,e.join(G)]]}}).then(alert("saved.")).catch(e=>{alert(e.result.error.message)})})},getSelected(){this.$getGapiClient().then(e=>{e.client.sheets.spreadsheets.values.get({spreadsheetId:Y,range:F+"!A2:Z"}).then(e=>{let t=e.result.values;for(let s=0;s<t.length;s++){let e=t[s],i=e[0];if(this.person==i){this.index=s,e.length>=2&&e[1].length>0&&(this.selected=e[1].split(G));break}}-1==this.index&&(this.index=t.length),this.list2()})})},list2(){V.a.get(R).then(e=>{let t=this.items,s=this.headers,i=this.list,n=e.data;this.result=n,n=n[this.person];for(let r in n.enccre){let e={key:r.replace("description","description par ENCCRE"),value:n.enccre[r]};s.push(r),t.push(e)}let a=[];for(let r in n.viaf){let e=n.viaf[r],t=e.viafId;if(-1==a.indexOf(t)){let s={title:r,references:e.references,viafId:t,show:!1};i.push(s),a.push(t)}}}).catch(e=>{console.log(e)})}}},z=X,B=s("ac7c"),U=s("8fea"),H=s("0789"),Z=s("9910"),Q=Object(o["a"])(z,W,D,!1,null,null,null),ee=Q.exports;c()(Q,{VApp:u["a"],VBtn:T["a"],VCard:h["a"],VCardActions:d["a"],VCardText:d["b"],VCheckbox:B["a"],VContainer:A["a"],VContent:p["a"],VDataTable:U["a"],VIcon:E["a"],VSlideYTransition:H["d"],VSpacer:Z["a"]}),i["a"].use(_["a"]);var te=new _["a"]({routes:[{path:"/",name:"index",component:J},{path:"/check",name:"check",component:ee}]});i["a"].config.productionTip=!1,new i["a"]({router:te,render:function(e){return e(y)}}).$mount("#app")}});
//# sourceMappingURL=app.d60636d1.js.map