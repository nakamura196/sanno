(function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],h=0,d=[];h<o.length;h++)r=o[h],a[r]&&d.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},a={app:0},i=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);var n=s("2b0e"),a=s("bb71");s("da64");n["a"].use(a["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-toolbar",[s("v-toolbar-title",{staticClass:"headline"},[e._v("\n            Un Outil de connexion des ID VIAF aux données ENCRE\n        ")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{flat:""}},[s("router-link",{attrs:{to:"/"}},[s("i",{staticClass:"material-icons"},[e._v("home")])])],1)],1)],1),s("v-content",[s("router-view")],1),s("v-footer",{attrs:{dark:"",height:"auto"}},[s("v-card",{staticClass:"flex",attrs:{flat:"",tile:""}},[s("v-card-actions",{staticClass:"grey darken-3 justify-center my-5 text-xs-center"},[e._v("\n                Tokyo Digital History. / Société d’étude sur l’Encyclopédie et les Lumières.\n            ")])],1)],1)],1)},r=[],o=s("2877"),l=s("6544"),c=s.n(l),u=s("7496"),h=s("8336"),d=s("b0af"),v=s("99d9"),p=s("549c"),f=s("553a"),b=s("9910"),m=s("71d9"),g=s("2a7f"),_={},y=Object(o["a"])(_,i,r,!1,null,null,null),w=y.exports;c()(y,{VApp:u["a"],VBtn:h["a"],VCard:d["a"],VCardActions:v["a"],VContent:p["a"],VFooter:f["a"],VSpacer:b["a"],VToolbar:m["a"],VToolbarItems:g["a"],VToolbarTitle:g["b"]});var V=s("8c4f"),k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[s("v-container",[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.$isAuthenticated(),expression:"!$isAuthenticated()"}],staticClass:"mb-4",attrs:{color:"primary"},on:{click:e.login}},[e._v("Login")]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$isAuthenticated(),expression:"$isAuthenticated()"}],staticClass:"mb-4",attrs:{color:"warning"},on:{click:e.logout}},[e._v("Logout")]),s("v-list",{directives:[{name:"show",rawName:"v-show",value:e.$isAuthenticated(),expression:"$isAuthenticated()"}],staticClass:"elevation-1 mb-5",attrs:{"two-line":""}},[e._l(e.items,function(t){return[s("v-list-tile",{key:t.title,attrs:{avatar:""},on:{click:function(s){return e.move(t.title)}}},[s("v-list-tile-avatar",[s("v-icon",[e._v("person")])],1),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(t.title))])],1),t.selected?s("v-list-tile-action",[s("v-btn",{attrs:{icon:"",ripple:""}},[s("v-icon",[e._v("check")])],1)],1):e._e()],1)]})],2)],1)],1)],1)},C=[],x=s("bc3a"),S=s.n(x),j=s("1685"),$=s.n(j);let A="12LdWL7-4WVfSGoPuM7Ji-yyJaXcjI3WywXzM7F48PYY",I="contributeurs_viaf";const O={apiKey:"AIzaSyAqoY4_PBPmknF-1ZSsYYRsBoM8i7ShKHs",clientId:"167625636259-5fmcf63g2sogbdjq7ep397iufqi9cjii.apps.googleusercontent.com",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],scope:"https://www.googleapis.com/auth/spreadsheets"};n["a"].use($.a,O);var T={data:function(){return{items:[],selected:[]}},watch:{$route:function(){this.search()}},created:function(){this.init()},computed:{isSignedIn(){return this.$isSignedIn()}},methods:{init(){1==this.$isAuthenticated()&&this.getSelected()},login(){this.$login()},logout(){this.$logout()},getSelected(){let e=[];this.selected=e,this.$getGapiClient().then(t=>{t.client.sheets.spreadsheets.values.get({spreadsheetId:A,range:I+"!A2:B"}).then(t=>{let s=t.result.values;for(let n=0;n<s.length;n++){let t=s[n];t.length>=2&&t[1].length>0&&e.push(t[0])}this.list()})})},move(e){this.$router.push({path:"check",query:{q:e}})},list(){S.a.get("https://nakamura196.github.io/sanno/contributeurs_viaf.json").then(e=>{let t=this.items,s=e.data;const n={};Object.keys(s).sort().forEach(function(e){n[e]=s[e]});for(let a in n){let e=-1!=this.selected.indexOf(a),s={title:a,selected:e};t.push(s)}}).catch(e=>{console.log(e)})}}},E=T,L=s("a523"),P=s("132d"),M=s("8860"),Y=s("ba95"),q=s("40fe"),N=s("c954"),B=s("5d23"),J=Object(o["a"])(E,k,C,!1,null,null,null),W=J.exports;c()(J,{VApp:u["a"],VBtn:h["a"],VContainer:L["a"],VContent:p["a"],VIcon:P["a"],VList:M["a"],VListTile:Y["a"],VListTileAction:q["a"],VListTileAvatar:N["a"],VListTileContent:B["a"],VListTileTitle:B["b"]});var D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-content",[s("v-container",[s("h1",{staticClass:"mb-4"},[e._v(e._s(e.person))]),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":"","hide-headers":""},scopedSlots:e._u([{key:"items",fn:function(t){return[s("th",[e._v(e._s(t.item.key))]),s("td",{staticClass:"py-2"},[e._v(e._s(t.item.value))])]}}])}),s("h2",{staticClass:"mt-5 mb-4"},[e._v("Sélectionnez les noms appropriés (réponses multiples autorisées)")]),e._l(e.list,function(t,n){return[s("v-card",{key:n,staticClass:"px-4 mb-4"},[s("v-card-actions",[s("v-checkbox",{key:t.title,attrs:{label:t.title+" ["+t.viafId+"]",value:t.viafId},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),t.references.length>0?[s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(e){t.show=!t.show}}},[s("v-icon",[e._v(e._s(t.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)]:e._e()],2),s("v-slide-y-transition",[s("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],staticClass:"pb-5"},e._l(t.references,function(t,n){return s("div",{key:n},[s("span",[e._v("["+e._s(n+1)+"] "),s("a",{attrs:{target:"_blank",href:t}},[e._v(e._s(t))])]),s("br")])}),0)],1)],1)]}),s("v-btn",{staticClass:"mb-5",attrs:{color:"primary"},on:{click:e.save}},[e._v("Save")])],2)],1)],1)},F=[];let G="|",R="12LdWL7-4WVfSGoPuM7Ji-yyJaXcjI3WywXzM7F48PYY",z="contributeurs_viaf",X="https://nakamura196.github.io/sanno/contributeurs_viaf.json";var H={data:function(){return{items:[],headers:[],list:[],person:"",result:{},selected:[],index:-1}},created:function(){let e=Object.assign({},this.$route.query);this.person=e.q,this.getSelected()},methods:{save(){let e=this.selected,t=2+this.index;this.$getGapiClient().then(s=>{s.client.sheets.spreadsheets.values.update({spreadsheetId:R,range:z+"!A"+t+":C"+t,valueInputOption:"USER_ENTERED",resource:{values:[[this.person,e.join(G)]]}}).then(alert("saved.")).catch(e=>{console.log(e),alert(e.result.error.message)})})},getSelected(){this.$getGapiClient().then(e=>{e.client.sheets.spreadsheets.values.get({spreadsheetId:R,range:z+"!A2:Z"}).then(e=>{let t=e.result.values;for(let s=0;s<t.length;s++){let e=t[s],n=e[0];if(this.person==n){this.index=s,e.length>=2&&e[1].length>0&&(this.selected=e[1].split(G));break}}-1==this.index&&(this.index=t.length),this.list2()})})},list2(){S.a.get(X).then(e=>{let t=this.items,s=this.headers,n=this.list,a=e.data;this.result=a,a=a[this.person];for(let r in a.enccre){let e={key:r.replace("description","description par ENCCRE"),value:a.enccre[r]};s.push(r),t.push(e)}let i=[];for(let r in a.viaf){let e=a.viaf[r],t=e.viafId;if(-1==i.indexOf(t)){let s={title:r,references:e.references,viafId:t,show:!1};n.push(s),i.push(t)}}}).catch(e=>{console.log(e)})}}},K=H,U=s("ac7c"),Z=s("8fea"),Q=s("0789"),ee=Object(o["a"])(K,D,F,!1,null,null,null),te=ee.exports;c()(ee,{VApp:u["a"],VBtn:h["a"],VCard:d["a"],VCardActions:v["a"],VCardText:v["b"],VCheckbox:U["a"],VContainer:L["a"],VContent:p["a"],VDataTable:Z["a"],VIcon:P["a"],VSlideYTransition:Q["d"],VSpacer:b["a"]}),n["a"].use(V["a"]);var se=new V["a"]({routes:[{path:"/",name:"index",component:W},{path:"/check",name:"check",component:te}]});n["a"].config.productionTip=!1,new n["a"]({router:se,render:function(e){return e(w)}}).$mount("#app")}});
//# sourceMappingURL=app.2437fc8c.js.map